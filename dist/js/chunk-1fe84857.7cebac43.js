(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fe84857"],{"24e5":function(e,a,t){e.exports=t.p+"img/camera.b49a1cc6.svg"},7338:function(e,a,t){e.exports=t.p+"img/back.33c74cab.svg"},7853:function(e,a,t){"use strict";t.r(a);var s,r,i=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"divcol margin_global overflow gap2 isolate",attrs:{id:"profile"}},[s("section",{staticClass:"container-header divcol",staticStyle:{gap:"3em"}},[s("img",{staticClass:"pointer back",staticStyle:{"--w":"100px"},attrs:{src:t("7338"),alt:"back"},on:{click:function(a){return e.$router.push("/home")}}}),s("div",{staticClass:"space gap2 wrap"},[s("div",{staticClass:"acenter wrap",staticStyle:{gap:"50px 80px"}},[s("aside",{staticClass:"container-mobile align"},[s("v-avatar",{attrs:{size:"clamp(5em, 7vw, 7.3125em)"}},[s("img",{staticStyle:{"--w":"100%"},attrs:{src:e.nearSocialAvatar||t("ecec"),alt:"profile image"}}),s("v-btn",{staticStyle:{"--b":"1px solid #000000"},attrs:{icon:""},on:{click:function(a){return e.goToSocial()}}},[s("img",{staticStyle:{"--w":"clamp(1.8em,2vw,2em)","--p":"2px"},attrs:{src:t("24e5"),alt:"camera icon"}})])],1),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:"artist"==e.profileType,expression:"profileType=='artist'"}],staticClass:"btn font2 mobile",attrs:{id:"sellBtn"}},[e._v("SELL")])],1),s("div",{staticClass:"divcol alignmobile"},[s("span",{staticClass:"font2 Title"},[e._v("PROFILE")]),s("h1",{staticClass:"p"},[e._v("WELCOME")]),s("h2",{staticClass:"p"},[e._v(e._s(e.dataUser.artistName))])])]),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:"artist"==e.profileType,expression:"profileType=='artist'"}],staticClass:"btn font2 desktop",attrs:{id:"sellBtn"},on:{click:function(a){return e.$router.push("/sell")}}},[e._v("SELL")])],1)]),s("section",{staticClass:"container-content grid"},[s("div",{staticClass:"divcol"},[s("label",{attrs:{for:"name"}},[e._v("ARTIST NAME")]),s("v-text-field",{attrs:{id:"name",disabled:e.disabledSave,solo:""},model:{value:e.dataUser.artistName,callback:function(a){e.$set(e.dataUser,"artistName",a)},expression:"dataUser.artistName"}})],1),s("div",{staticClass:"divcol"},[s("label",{attrs:{for:"url"}},[e._v("PUBLIC URL")]),s("v-text-field",{attrs:{id:"url",disabled:e.disabledSave,solo:"",placeholder:"http://examplew3music.com"},scopedSlots:e._u([{key:"append",fn:function(){return[s("img",{attrs:{src:t("9a16"),alt:"url icon"}})]},proxy:!0}]),model:{value:e.dataUser.publicUrl,callback:function(a){e.$set(e.dataUser,"publicUrl",a)},expression:"dataUser.publicUrl"}})],1),s("div",{staticClass:"fwrap gap2",staticStyle:{"--fb":"1 1 7.9375em"}},[s("div",{staticClass:"divcol",staticStyle:{"max-width":"7.9375em"}},[s("label",{attrs:{for:"age"}},[e._v("AGE")]),s("v-text-field",{attrs:{id:"age",disabled:e.disabledSave,solo:"",type:"number"},model:{value:e.dataUser.age,callback:function(a){e.$set(e.dataUser,"age",a)},expression:"dataUser.age"}})],1),s("div",{staticClass:"divcol"},[s("label",{attrs:{for:"location"}},[e._v("LOCATION")]),s("v-select",{attrs:{disabled:e.disabledSave,id:"location",items:e.dataUser.dataLocation,solo:""},model:{value:e.dataUser.location,callback:function(a){e.$set(e.dataUser,"location",a)},expression:"dataUser.location"}})],1)]),s("div",{staticClass:"divcol"},[s("label",{attrs:{for:"you-are"}},[e._v("YOU ARE?")]),s("v-select",{attrs:{disabled:e.disabledSave,id:"you-are",items:e.dataUser.dataYouAre,solo:""},model:{value:e.dataUser.youAre,callback:function(a){e.$set(e.dataUser,"youAre",a)},expression:"dataUser.youAre"}})],1),s("div",{staticClass:"divcol"},[s("label",{attrs:{for:"email"}},[e._v("EMAIL")]),s("v-text-field",{attrs:{id:"email",disabled:e.disabledSave,solo:"",placeholder:"examplew3music@domain.com"},model:{value:e.dataUser.email,callback:function(a){e.$set(e.dataUser,"email",a)},expression:"dataUser.email"}})],1),s("div",{style:"fan"==e.profileType?"grid-row:span 2":null,attrs:{id:"music_genre"}},[s("label",{attrs:{for:"music-genre"}},[e._v("MUSIC "+e._s("fan"==e.profileType?"PREFERENCE":"GENRE"))]),"artist"==e.profileType?s("v-select",{attrs:{disabled:e.disabledSave,id:"music-genre","item-text":"name","item-value":"id",items:e.dataUser.dataMusicGenre,solo:""},model:{value:e.dataUser.musicGenre,callback:function(a){e.$set(e.dataUser,"musicGenre",a)},expression:"dataUser.musicGenre"}}):s("v-select",{attrs:{id:"music-genre",disabled:e.disabledSave,items:e.dataUser.dataMusicPreference,"item-text":"name","item-value":"id",placeholder:"Select",solo:""},on:{change:function(a){!e.dataMusicPreferenceSelected.includes(e.dataMusicPreferenceSelected.indexOf(e.name))&&e.dataMusicPreferenceSelected.push(e.name)}},model:{value:e.dataUser.musicGenre,callback:function(a){e.$set(e.dataUser,"musicGenre",a)},expression:"dataUser.musicGenre"}}),s("section",{staticClass:"fwrap gap1"},e._l(e.dataUser.dataMusicPreferenceSelected,(function(a,t){return s("v-chip",{key:t,staticClass:"font2 maxsize_w",attrs:{close:"","close-icon":"mdi-close"},on:{"click:close":function(t){e.dataUser.dataMusicPreferenceSelected.splice(e.dataUser.dataMusicPreferenceSelected.indexOf(a),1)}}},[e._v(" "+e._s(a)+" ")])})),1)],1),s("div",{staticClass:"divcol"},[s("label",{attrs:{for:"description"}},[e._v("PROFILE DESCRIPTION")]),s("vue-editor",{style:"\n          --error-message: '"+e.errorText+"';\n          --br: 1.5vmax;\n          --h: 95.94px;\n        ",attrs:{id:"description",disabled:e.disabledSave},on:{"text-change":function(a){e.hasUserInteraction=!0}},model:{value:e.dataUser.description,callback:function(a){e.$set(e.dataUser,"description",a)},expression:"dataUser.description"}})],1),"artist"==e.profileType?s("div",{staticClass:"divcol"},[s("label",[e._v("NEAR WALLET")]),s("v-text-field",{attrs:{solo:"",disabled:""},model:{value:e.walletNear,callback:function(a){e.walletNear=a},expression:"walletNear"}})],1):e._e()]),s("v-btn",{staticClass:"btn font2 align",staticStyle:{"--w":"7.25em"},attrs:{disabled:e.disabledSave},on:{click:function(a){return e.saveProfile()}}},[e._v("SAVE "),e.disabledSave?s("v-progress-circular",{attrs:{size:21,indeterminate:""}}):e._e()],1)],1)},n=[],l=t("8785"),c=t("1da1"),o=(t("96cf"),t("a4d3"),t("e01a"),t("a9e3"),t("a8d7")),d=t("5184"),u=t("5873"),m={name:"profile",components:{VueEditor:u["a"]},data:function(){return{modeConnect:localStorage.getItem("modeConnect"),disabledSave:!1,nearSocialAvatar:"https://ipfs.near.social/ipfs/"+localStorage.getItem("nearSocialAvatar"),urlTx:null,walletNear:null,profileType:"artist",dataUser:{youAre:null,dataYouAre:["Producer","Artist"],location:null,dataLocation:["Madrid, Spain","Carabobo, Venezuela"],musicGenre:"0",dataMusicGenre:[],age:null,email:null,artistName:null,description:null,publicUrl:null,dataMusicPreference:[],dataMusicPreferenceSelected:[],hasUserInteraction:!1}}},computed:{errorText:function(){return this.hasUserInteraction?this.sample.description?"":"Field Required":""}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(!e.$ramper.getUser(),!e.$selector.getAccountId()),e.$ramper.getUser()||null!==(t=e.$selector)&&void 0!==t&&t.getAccountId()||e.$router.push("/"),e.$emit("RouteValidator"),a.next=5,e.getGenders();case 5:e.walletNear=e.$ramper.getAccountId()||e.$selector.getAccountId(),e.getData();case 7:case"end":return a.stop()}}),a)})))()},methods:{goToSocial:function(){window.open("https://test.near.social/")},getGenders:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t=Object(d["a"])(s||(s=Object(l["a"])(["\n        query MyQuery {\n          genders {\n            id\n            name\n          }\n        }\n      "]))),console.log("ASD"),e.$apollo.watchQuery({query:t,pollInterval:1e4}).subscribe((function(a){var t=a.data;console.log(t),e.dataUser.dataMusicGenre=t.genders,e.dataUser.dataMusicPreference=t.genders}));case 3:case"end":return a.stop()}}),a)})))()},getData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var t,s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=Object(d["a"])(r||(r=Object(l["a"])(["\n        query MyQuery($wallet: String!) {\n          users(where: {wallet: $wallet}) {\n            artist_name\n            description\n            email\n            id\n            location\n            wallet\n            youare\n            public_url\n            music_genre\n            age\n          }\n        }\n      "]))),s=e.$ramper.getAccountId()||e.$selector.getAccountId(),a.next=4,e.$apollo.query({query:t,variables:{wallet:s}});case 4:i=a.sent,n=i.data,console.log(n),e.dataUser.youAre=n.users[0].youare||null,e.dataUser.location=n.users[0].location||null,e.dataUser.musicGenre=String(n.users[0].music_genre)||"0",e.dataUser.age=Number(n.users[0].age)||null,e.dataUser.email=n.users[0].email||null,e.dataUser.artistName=n.users[0].artist_name||null,e.dataUser.description=n.users[0].description||null,e.dataUser.publicUrl=n.users[0].public_url||null,console.log(e.dataUser);case 8:case"end":return a.stop()}}),a)})))()},saveProfile:function(){"walletSelector"===this.modeConnect?this.saveProfileSelector():"ramper"===this.modeConnect&&this.saveProfileRamper()},saveProfileSelector:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.disabledSave=!0,!e.$selector.getAccountId()){a.next=8;break}return localStorage.setItem("typeResult","profile"),o["a"].collection("TESTNET").doc(e.walletNear).set({artist:e.dataUser.artistName||""}),a.next=6,e.$selector.wallet.signAndSendTransactions({transactions:[{receiverId:"nft2.w3music2023.testnet",actions:[{type:"FunctionCall",params:{methodName:"set_user",args:{data_user:{artist_name:e.dataUser.artistName||"",public_url:e.dataUser.publicUrl||"",age:Number(e.dataUser.age)||0,location:e.dataUser.location||"",youare:e.dataUser.youAre||"",email:e.dataUser.email||"",music_genre:Number(e.dataUser.musicGenre)||0,description:e.dataUser.description||"",wallet:e.$selector.getAccountId()}},gas:"50000000000000"}}]}]});case 6:t=a.sent,console.log(t);case 8:e.disabledSave=!1;case 9:case"end":return a.stop()}}),a)})))()},saveProfileRamper:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var t,s,r,i,n,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.disabledSave=!0,!e.$ramper.getUser()){a.next=10;break}return console.log(e.dataUser.musicGenre),n=[e.$ramper.functionCall("set_user",{data_user:{artist_name:e.dataUser.artistName||"",public_url:e.dataUser.publicUrl||"",age:Number(e.dataUser.age)||0,location:e.dataUser.location||"",youare:e.dataUser.youAre||"",email:e.dataUser.email||"",music_genre:Number(e.dataUser.musicGenre)||0,description:e.dataUser.description||"",wallet:e.$ramper.getAccountId()}},"50000000000000")],a.next=6,e.$ramper.sendTransaction({transactionActions:[{receiverId:"nft2.w3music2023.testnet",actions:n}],network:"testnet"});case 6:l=a.sent,l&&"near_wallet"===JSON.parse(localStorage.getItem("ramper_loggedInUser")).signupSource&&l.txHashes.length>0||l.result||null!==(t=l.result[0])&&void 0!==t&&null!==(s=t.status)&&void 0!==s&&s.SuccessValue||""===(null===(r=l.result[0])||void 0===r||null===(i=r.status)||void 0===i?void 0:i.SuccessValue)?(e.urlTx="https://testnet.nearblocks.io/txns/"+urlParams.get("transactionHashes"),localStorage.setItem("results",!0),localStorage.setItem("typeResult","profile"),localStorage.setItem("linkHash",e.urlTx),o["a"].collection("TESTNET").doc(e.walletNear).set({artist:e.dataUser.artistName||""}),e.$router.push("/results")):(localStorage.setItem("results",!1),e.$router.push("/results")),a.next=14;break;case 10:return a.next=12,e.$ramper.signIn();case 12:c=a.sent,c&&c.user&&(localStorage.setItem("logKey","in"),location.reload());case 14:e.disabledSave=!1;case 15:case"end":return a.stop()}}),a)})))()}}},p=m,v=(t("9f5a"),t("2877")),f=t("6544"),g=t.n(f),b=t("8212"),U=t("8336"),w=t("cc20"),S=t("490a"),h=t("b974"),x=t("8654"),y=Object(v["a"])(p,i,n,!1,null,null,null);a["default"]=y.exports;g()(y,{VAvatar:b["a"],VBtn:U["a"],VChip:w["a"],VProgressCircular:S["a"],VSelect:h["a"],VTextField:x["a"]})},"9a16":function(e,a,t){e.exports=t.p+"img/url.bda891d4.svg"},"9f5a":function(e,a,t){"use strict";t("d6a2")},a8d7:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var s=t("2881"),r=(t("d799"),t("71b3"),t("36f8"),{apiKey:"AIzaSyD3A4gu6KMPj3jyoUDpmv6xCfk2JcuvBmA",authDomain:"w3music-39365.firebaseapp.com",projectId:"w3music-39365",storageBucket:"w3music-39365.appspot.com",messagingSenderId:"588067526382",appId:"1:588067526382:web:5ef70c9d51abb60763c5ff",measurementId:"G-7EJ4M99T5T"});s["a"].initializeApp(r);var i=s["a"].firestore()},d6a2:function(e,a,t){},ecec:function(e,a,t){e.exports=t.p+"img/account.c50b0616.svg"}}]);
//# sourceMappingURL=chunk-1fe84857.7cebac43.js.map