(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-303168ea"],{"2fae":function(e,t,a){e.exports=a.p+"img/sonido.4d371246.svg"},"3e0a":function(e,t,a){},4926:function(e,t,a){e.exports=a.p+"img/near-wallet-icon.7d1b66b7.svg"},5877:function(e,t,a){"use strict";a("3e0a")},7338:function(e,t,a){e.exports=a.p+"img/back.33c74cab.svg"},"7d11":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"divcol margin_global gap2 isolate",attrs:{id:"sell"}},[n("ModalConnect",{ref:"ModalConnect"}),n("section",{staticClass:"container-header divcol",staticStyle:{gap:"2em"}},[n("img",{staticClass:"pointer back",staticStyle:{"--w":"100px"},attrs:{src:a("7338"),alt:"back"},on:{click:function(t){return e.back()}}}),e._m(0)]),n("section",{staticClass:"container-content divcol gap2"},[n("h2",{staticClass:"p"},[e._v("UPLOAD TRACKS")]),n("section",{staticClass:"divcol"},[n("aside",{staticClass:"grid gap2",staticStyle:{"--gtc":"repeat(auto-fit,minmax(min(100%,9.9375em),1fr))","place-items":"center"}},e._l(e.dataTracks,(function(t,a){return n("div",{key:a},[n("label",[e._v(e._s(t.title))]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",accept:t.type,id:t.id},on:{change:e.handleFileSelection}}),n("v-card",{staticClass:"card center",class:{active:t.active},staticStyle:{"--bs":"5px 4px 11px rgba(0, 0, 0, 0.25)","--br":"0"},attrs:{disabled:e.disabledSave,ripple:!0},on:{click:function(a){return e.openPicker(t)}}},[n("img",{attrs:{src:t.image,alt:"track image"}})])],1)})),0)]),n("v-form",{ref:"form",staticClass:"divcol",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("section",{staticClass:"grid",staticStyle:{"--gtc":"repeat(auto-fit,minmax(min(100%,34.4375em),1fr))",gap:"0 2em"}},[n("div",{staticClass:"divcol"},[n("label",{attrs:{for:"title"}},[e._v("TITLE")]),n("v-text-field",{attrs:{id:"title",disabled:e.disabledSave,rules:e.rules.required,placeholder:"Summer Days",solo:""},model:{value:e.sample.title,callback:function(t){e.$set(e.sample,"title",t)},expression:"sample.title"}})],1),n("div",{staticClass:"divcol",staticStyle:{"--gr":"span 2"}},[n("label",{attrs:{for:"description"}},[e._v("TRACK DESCRIPTION")]),n("vue-editor",{style:"--error-message: '"+e.errorText+"'; --br: 1.5vmax",attrs:{disabled:e.disabledSave,placeholder:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,"},on:{"text-change":function(t){e.hasUserInteraction=!0}},model:{value:e.sample.description,callback:function(t){e.$set(e.sample,"description",t)},expression:"sample.description"}})],1),n("div",{staticClass:"divcol"},[n("label",{attrs:{for:"genre"}},[e._v("TRACK GENRE")]),n("v-select",{attrs:{id:"genre",disabled:e.disabledSave,rules:e.rules.required,"item-text":"name",placeholder:"Select",items:e.dataGenre,solo:""},model:{value:e.sample.genre,callback:function(t){e.$set(e.sample,"genre",t)},expression:"sample.genre"}})],1),n("div",{staticClass:"divcol"},[n("label",{attrs:{for:"price"}},[e._v("FLOOR PRICE")]),n("v-text-field",{attrs:{id:"price",disabled:e.disabledSave,rules:e.rules.required,placeholder:"0.00",solo:"",type:"number"},on:{input:e.changePrice,change:e.changePrice},scopedSlots:e._u([{key:"append",fn:function(){return[n("span",{staticClass:"font2"},[e._v("$")])]},proxy:!0}]),model:{value:e.sample.price,callback:function(t){e.$set(e.sample,"price",t)},expression:"sample.price"}})],1),n("div",{staticClass:"divcol"},[n("label",{attrs:{for:"send"}},[e._v("SEND INVITATION TO COLLABORATE")]),n("v-text-field",{attrs:{id:"send",disabled:e.disabledSave,placeholder:"chris.up@gmail.com",solo:"",type:"email"},model:{value:e.sample.invitation,callback:function(t){e.$set(e.sample,"invitation",t)},expression:"sample.invitation"}})],1)])])],1),n("v-btn",{staticClass:"btn align font2",staticStyle:{"--w":"min(100%,7.25em)"},attrs:{disabled:e.disabledSave},on:{click:function(t){return e.nftSample()}}},[e._v("SAVE "),e.disabledSave?n("v-progress-circular",{attrs:{size:21,indeterminate:""}}):e._e()],1)],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"divcol"},[a("span",{staticClass:"font2"},[e._v("MARKETPLACE")]),a("h1",{staticClass:"p"},[e._v("SELL")])])}],s=a("9094"),i=s["a"],c=(a("9226"),a("2877")),l=a("6544"),o=a.n(l),u=a("8336"),d=a("b0af"),p=a("4bd4"),m=a("490a"),f=a("b974"),v=a("8654"),g=Object(c["a"])(i,n,r,!1,null,null,null);t["default"]=g.exports;o()(g,{VBtn:u["a"],VCard:d["a"],VForm:p["a"],VProgressCircular:m["a"],VSelect:f["a"],VTextField:v["a"]})},9094:function(e,t,a){"use strict";(function(e){var n,r=a("8785"),s=a("1da1"),i=(a("96cf"),a("a4d3"),a("e01a"),a("7db0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("25f0"),a("e9c4"),a("a9e3"),a("cb2b")),c=a("1c46"),l=a.n(c),o=a("5873"),u=a("d9eb"),d=a("5184");u["Contract"];t["a"]={name:"sell",components:{ModalConnect:i["a"],VueEditor:o["a"]},data:function(){var e=this;return{modeConnect:localStorage.getItem("modeConnect"),sample:{},urlTx:null,dataTracks:[{id:"cover",title:"COVER",active:!0,type:"image/*",image:a("be34")},{id:"preview",title:"PREVIEW TRACK",active:!1,type:"audio/*",image:a("2fae")},{id:"full",title:"FULL TRACK",active:!1,type:"audio/*",image:a("2fae")}],genre:"0",dataGenre:[],imageCard:a("2fae"),selectFile:null,trackPreview:null,disabledSave:!1,trackFull:null,cover:null,rules:{required:[function(e){return!!e||"Field required"}],percentage_split:[function(e){return!!e||"Field required"},function(){return e.currentPercentage_split>50?"must be 50% or less":null}]},hasUserInteraction:!1}},computed:{errorText:function(){return this.hasUserInteraction?this.sample.description?"":"Field Required":""}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("RouteValidator"),t.next=3,e.getGenders();case 3:case"end":return t.stop()}}),t)})))()},methods:{changePrice:function(){this.sample.price<0&&(this.sample.price=0)},openPicker:function(e){var t=document.getElementById(e.id);t.click(),this.selectFile=e.id},handleFileSelection:function(e){var t=this;"full"===this.selectFile?this.trackFull=e.target.files[0]:"preview"===this.selectFile?this.trackPreview=e.target.files[0]:"cover"===this.selectFile&&(this.cover=e.target.files[0]),this.dataTracks.find((function(e){e.id===t.selectFile&&("cover"===e.id?e.image=URL.createObjectURL(t.cover):(e.active=!0,e.image=a("be34")))}))},uploadIpfs:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.axios.post("https://api.nft.storage/upload",e,{headers:{"Content-Type":e.type,Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweGVkOTdhZTMxZjIwRjEzODY0NTU2MDY2MDQ4ZUI0YkY0NkZDRTUyMUQiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTY4OTYyMDk4MDk1NiwibmFtZSI6IlczTXVzaWMifQ.-vXecGHBpB62MCRtXsGsWJkwTEA2-7PobHCrMtMWsvs"},maxContentLength:104857600,maxBodyLength:104857600}).then((function(e){return console.log(e.data),e.data})).catch((function(e){return console.log(e),!1})),a.abrupt("return",n);case 2:case"end":return a.stop()}}),a)})))()},uploadIpfsNode:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=new FormData,n.append("uploaded_file",e),r=t.axios.post("https://develop.globaldv.tech/w3service/api/ipfs/",n).then((function(e){return console.log(e.data),e.data})).catch((function(e){return console.log(e),!1})),a.abrupt("return",r);case 4:case"end":return a.stop()}}),a)})))()},getGenders:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=Object(d["a"])(n||(n=Object(r["a"])(['\n        query MyQuery {\n          genders(where: {id_gt: "0"}) {\n            id\n            name\n          }\n        }\n      ']))),e.$apollo.watchQuery({query:a,pollInterval:1e4}).subscribe((function(t){var a=t.data;console.log(a),e.dataGenre=a.genders}));case 2:case"end":return t.stop()}}),t)})))()},back:function(){window.history.go(-1)},encryptRSA:function(t){try{var a=l.a.publicEncrypt({key:"-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAn1KIrhSPFy/ZrSSNgfK6zXPI8qU5N2chddFATSp8tPSl8ajCQ7T/JiJ5Nh/LK1cRfgYjg4ktqLPxW5lro4qNge7bOMxVCMEtRXZVte5dGwXrQiKnb11Wz7R+5pkD57TpTkehkVgIDBswSCKBdFMAA/4K7vlBTr43f8GNAeeuidiFmcb02ZbrG8VUP/vw+9Qs8XcZOUqp5I0KYHmyCW6PNsHK89G8PMihi3VtWH2hNlTA4Md+rtVo4NAh9iM125DoSBRUJHUlIHH3ru0ifx9CPpAqCEQ7Y5w1MGTV84bijU6azNylOuHADUYwaiuR9ppRZR2nltlWGHGqk9H1k66TEQIDAQAB-----END PUBLIC KEY-----",padding:l.a.constants.RSA_PKCS1_OAEP_PADDING},e.from(t));return a.toString("base64")}catch(n){return console.log(n),!1}},nftSample:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$ramper.getUser()||null!==(a=e.$selector)&&void 0!==a&&a.getAccountId()?"walletSelector"===e.modeConnect?e.nftSampleSelector():"ramper"===e.modeConnect&&e.nftSampleRamper():e.$refs.ModalConnect.modalConnect=!0;case 1:case"end":return t.stop()}}),t)})))()},nftSampleSelector:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.disabledSave=!0,!e.$selector.getAccountId()){t.next=23;break}if(!e.$refs.form.validate()){t.next=21;break}return t.next=5,e.uploadIpfs(e.cover);case 5:return a=t.sent,t.next=8,e.uploadIpfs(e.trackPreview);case 8:return n=t.sent,t.next=11,e.uploadIpfs(e.trackFull);case 11:return r=t.sent,t.next=14,e.encryptRSA("https://"+r.value.cid+".ipfs.nftstorage.link");case 14:if(s=t.sent,!(a&&n&&s)){t.next=21;break}return i=[{trait_type:"track_preview",value:"https://"+n.value.cid+".ipfs.nftstorage.link"},{trait_type:"track_full",value:s}],localStorage.setItem("typeResult","sell"),t.next=20,e.$selector.wallet.signAndSendTransactions({transactions:[{receiverId:"nft2.w3music2023.testnet",actions:[{type:"FunctionCall",params:{methodName:"nft_sample",args:{token_metadata:{title:e.sample.title,description:e.sample.description,media:"https://"+a.value.cid+".ipfs.nftstorage.link",reference:e.sample.genre,extra:JSON.stringify(i)},price:Number(e.sample.price)},gas:"50000000000000",deposit:"10000000000000000000000"}}]}]});case 20:t.sent;case 21:t.next=24;break;case 23:e.$refs.ModalConnect.modalConnect=!0;case 24:e.disabledSave=!1;case 25:case"end":return t.stop()}}),t)})))()},nftSampleRamper:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c,l,o,u,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.disabledSave=!0,!e.$ramper.getUser()){t.next=25;break}if(!e.$refs.form.validate()){t.next=23;break}return t.next=5,e.uploadIpfs(e.cover);case 5:return a=t.sent,t.next=8,e.uploadIpfs(e.trackPreview);case 8:return n=t.sent,t.next=11,e.uploadIpfs(e.trackFull);case 11:return r=t.sent,t.next=14,e.encryptRSA("https://"+r.value.cid+".ipfs.nftstorage.link");case 14:if(s=t.sent,!(a&&n&&s)){t.next=23;break}return u=[{trait_type:"track_preview",value:"https://"+n.value.cid+".ipfs.nftstorage.link"},{trait_type:"track_full",value:s}],d=[e.$ramper.functionCall("nft_sample",{token_metadata:{title:e.sample.title,description:e.sample.description,media:"https://"+a.value.cid+".ipfs.nftstorage.link",reference:e.sample.genre,extra:JSON.stringify(u)},price:Number(e.sample.price)},"50000000000000","10000000000000000000000")],console.log("testnet"),t.next=21,e.$ramper.sendTransaction({transactionActions:[{receiverId:"nft2.w3music2023.testnet",actions:d}],network:"testnet"});case 21:p=t.sent,p&&"near_wallet"===JSON.parse(localStorage.getItem("ramper_loggedInUser")).signupSource&&p.txHashes.length>0||p.result||null!==(i=p.result[0])&&void 0!==i&&null!==(c=i.status)&&void 0!==c&&c.SuccessValue||""===(null===(l=p.result[0])||void 0===l||null===(o=l.status)||void 0===o?void 0:o.SuccessValue)?(e.urlTx="https://testnet.nearblocks.io/txns/"+urlParams.get("transactionHashes"),localStorage.setItem("results",!0),localStorage.setItem("typeResult","sell"),localStorage.setItem("linkHash",e.urlTx),e.$router.push("/results")):(localStorage.setItem("results",!1),e.$router.push("/results"));case 23:t.next=26;break;case 25:e.$refs.ModalConnect.modalConnect=!0;case 26:e.disabledSave=!1;case 27:case"end":return t.stop()}}),t)})))()}}}}).call(this,a("b639").Buffer)},9226:function(e,t,a){"use strict";a("df5e")},"9bdf":function(e,t,a){e.exports=a.p+"img/ramper.9f7f1fb4.svg"},be34:function(e,t,a){e.exports=a.p+"img/track.447405b2.png"},cb2b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"content-class":"modal-connect divcol relative isolate"},model:{value:e.modalConnect,callback:function(t){e.modalConnect=t},expression:"modalConnect"}},[n("aside",{staticClass:"space"},[n("span",{staticClass:"h9_em",staticStyle:{color:"#fff !important"}},[e._v("Connect Wallet")]),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.closeDialog()}}},[n("v-icon",{attrs:{size:"1.5em"}},[e._v("mdi-close")])],1)],1),n("v-sheet",{staticClass:"grid",attrs:{color:"transparent"}},[n("v-btn",{attrs:{plain:"",color:"hsl(0 0% 0% / .5)"},on:{click:function(t){return e.logIn()}}},[n("img",{attrs:{src:a("9bdf"),alt:"near"}}),n("div",{staticClass:"divcol astart",staticStyle:{gap:"5px"}},[n("span",{staticClass:"h12_em bold",staticStyle:{color:"#fff !important"}},[e._v("Email")]),n("span",{staticClass:"h13_em"},[e._v("ramper.xyz")])])]),n("v-btn",{attrs:{plain:""},on:{click:function(t){return e.walletSelector()}}},[n("img",{attrs:{src:a("4926"),alt:"near"}}),n("div",{staticClass:"divcol astart",staticStyle:{gap:"5px"}},[n("span",{staticClass:"h12_em bold",staticStyle:{color:"#fff !important"}},[e._v("WALLET")]),n("span",{staticClass:"h13_em"},[e._v("near")])])])],1)],1)},r=[],s=a("ade3"),i=a("1da1"),c=(a("96cf"),{name:"ConnectModal",data:function(){return{modalConnect:!1}},mounted:function(){},methods:Object(s["a"])({closeDialog:function(){this.modalConnect=!1},walletSelector:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modalConnect=!1,localStorage.setItem("modeConnect","walletSelector"),e.$selector.modal.show();case 3:case"end":return t.stop()}}),t)})))()},logIn:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.modalConnect=!1,t.next=3,e.$ramper.signIn();case 3:a=t.sent,a&&a.user&&(localStorage.setItem("modeConnect","ramper"),localStorage.setItem("logKey","in"),location.reload());case 5:case"end":return t.stop()}}),t)})))()}},"closeDialog",(function(){this.modalConnect=!1,JSON.parse(localStorage.getItem("discord_sinc"))&&localStorage.removeItem("discord_sinc")}))}),l=c,o=(a("5877"),a("2877")),u=a("6544"),d=a.n(u),p=a("8336"),m=a("169a"),f=a("132d"),v=a("8dd9"),g=Object(o["a"])(l,n,r,!1,null,null,null);t["a"]=g.exports;d()(g,{VBtn:p["a"],VDialog:m["a"],VIcon:f["a"],VSheet:v["a"]})},df5e:function(e,t,a){}}]);
//# sourceMappingURL=chunk-303168ea.02a9a4ac.js.map